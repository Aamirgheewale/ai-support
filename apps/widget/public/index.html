<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Widget Preview - AI Support</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            margin: 0;
            padding: 40px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            background: white;
            border-radius: 12px;
            padding: 40px;
            max-width: 600px;
            margin: 0 auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            text-align: center;
        }
        h1 {
            color: #333;
            margin-bottom: 20px;
        }
        p {
            color: #666;
            line-height: 1.6;
            margin-bottom: 30px;
        }
        #chat-widget-container {
            min-height: 100px;
        }
        .status {
            padding: 10px;
            margin-top: 20px;
            border-radius: 4px;
            font-size: 14px;
        }
        .status.loading {
            background: #e3f2fd;
            color: #1976d2;
        }
        .status.error {
            background: #ffebee;
            color: #c62828;
        }
        .status.success {
            background: #e8f5e9;
            color: #2e7d32;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Widget Preview</h1>
        <p>This is a demo page for the AI Support Widget. The widget should appear as a floating button in the bottom right corner.</p>
        <div id="status" class="status loading">Loading widget...</div>
        <div id="chat-widget-container"></div>
    </div>

    <!-- Load React and ReactDOM from CDN (required for UMD build) -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Load the widget script (UMD format) -->
    <script src="./ai-support-widget.umd.cjs"></script>
    
    <!-- Initialize the widget -->
    <script>
        function initWidget() {
            const statusEl = document.getElementById('status');
            
            // Wait for the widget function to be available
            if (typeof window.AiSupportWidgetInit !== 'undefined') {
                try {
                    window.AiSupportWidgetInit({
                        targetId: 'chat-widget-container'
                    });
                    statusEl.textContent = 'Widget loaded successfully! Look for the chat button in the bottom right.';
                    statusEl.className = 'status success';
                } catch (error) {
                    statusEl.textContent = 'Error initializing widget: ' + error.message;
                    statusEl.className = 'status error';
                    console.error('Widget initialization error:', error);
                }
            } else {
                // Fallback: try ES module
                import('./ai-support-widget.es.js').then(() => {
                    if (typeof window.AiSupportWidgetInit !== 'undefined') {
                        window.AiSupportWidgetInit({
                            targetId: 'chat-widget-container'
                        });
                        statusEl.textContent = 'Widget loaded successfully (ES module)!';
                        statusEl.className = 'status success';
                    } else {
                        throw new Error('Widget init function not found');
                    }
                }).catch(err => {
                    statusEl.textContent = 'Failed to load widget. Make sure the build completed successfully.';
                    statusEl.className = 'status error';
                    console.error('Failed to load widget:', err);
                });
            }
        }
        
        // Initialize when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initWidget);
        } else {
            initWidget();
        }
    </script>
</body>
</html>

